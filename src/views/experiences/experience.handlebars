<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalle de Experiencia | Vertika</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    
    <link rel="stylesheet" href="/static/styles/vertika-header.css">
    <link rel="stylesheet" href="/static/styles/experience-detail.css">
    <link rel="stylesheet" href="/static/styles/gallery.css">
    <link rel="stylesheet" href="/static/styles/reserve-experience-modal.css"> </head>
<body>
    
    <header>
    <div class="logo">
      <img src="https://imgur.com/2R9vMFY.png" onclick="window.location.href='/api'" alt="Vertika Logo" class="app-logo">
      <h1 onclick="window.location.href='/api'">VERTIKA</h1>
    </div>

    <nav id="mainNav" style="display: none;">
      <a href="/api" class="nav-link" data-page="home">Inicio</a>
      <a href="#" class="nav-link" data-page="reservations" id="navReservations">Mis Reservaciones</a>
      <a href="#" class="nav-link" data-page="experiences" id="navExperiences" style="display: none;">Mis
        Experiencias</a>
      <a href="#" class="nav-link" data-page="request-guide" id="navRequestGuide" style="display: none;">Solicitar ser
        Guía</a>
    </nav>

    <div class="user-actions" id="userActions">
      <button class="login" onclick="window.location.href='/api/auth/login'">Iniciar Sesión</button>
      <button class="register" onclick="window.location.href='/api/auth/register'">Registrarse</button>
    </div>
  </header>

    <main class="detail-container" id="mainContainer" data-id="{{experienceId}}">
        
        <div class="listing-header">
            <h1 id="expTitle">Cargando experiencia...</h1>
            <div class="listing-subtext">
                <span id="expLocation">Ubicación...</span>
                <span class="dot">•</span>
                <span id="modalBadges" class="experience-badges-inline"></span>
            </div>
        </div>

        <section class="gallery-grid" id="galleryGrid">
            <div class="gallery-placeholder skeleton"></div>
        </section>

        <div class="content-layout">
            
            <div class="main-info">
                <div class="host-section">
                    <div class="host-text">
                        <h2>Experiencia ofrecida por <span id="guideName">Guia</span></h2>
                        <p class="host-stats">Guía Certificado Vertika</p>
                    </div>
                    <div class="host-avatar-wrapper">
                        <img src="https://via.placeholder.com/60" alt="Guía" class="guide-avatar" id="guideAvatar">
                        <div class="badge-icon"><i class="fa-solid fa-medal"></i></div>
                    </div>
                </div>

                <hr class="divider">

                <div class="features-list" id="modalInfoGrid">
                    <div class="feature-item">
                        <i class="fa-regular fa-calendar"></i>
                        <div><h3>Fecha</h3><p id="expDateText">...</p></div>
                    </div>
                    <div class="feature-item">
                        <i class="fa-solid fa-user-group"></i>
                        <div><h3>Grupo</h3><p id="expGroupSize">...</p></div>
                    </div>
                    <div class="feature-item">
                        <i class="fa-solid fa-person-hiking"></i>
                        <div><h3>Actividad</h3><p id="expActivity">...</p></div>
                    </div>
                    <div class="feature-item">
                        <i class="fa-solid fa-layer-group"></i>
                        <div><h3>Dificultad</h3><p id="expDifficulty">...</p></div>
                    </div>
                </div>

                <hr class="divider">

                <div class="description-section">
                    <h3>Acerca de esta experiencia</h3>
                    <p id="expDescription" class="text-justify"></p>
                </div>

                <hr class="divider">

                <div class="guide-reviews-section">
                    <div class="guide-reviews-header">
                        <h3 class="guide-reviews-title">Calificaciones del Guía</h3>
                        <div class="guide-rating-summary" id="guideRatingSummary">
                            <div class="guide-rating-number" id="guideAvgRating">-</div>
                            <div>
                                <div class="guide-rating-stars" id="guideRatingStars"></div>
                                <div class="guide-rating-count" id="guideReviewCount">Sin calificaciones</div>
                            </div>
                        </div>
                    </div>
                    <div id="reviewsContainer">
                        <div class="reviews-loading">Cargando reseñas...</div>
                    </div>
                </div>
            </div>

            <div class="sidebar-info">
                <div class="booking-card">
                    <div class="booking-header">
                        <div>
                            <span class="price" id="cardPrice">$0</span> 
                            <span class="price-text"> por persona</span>
                        </div>
                    </div>

                    <div class="booking-picker">
                        <div class="picker-row">
                            <div class="picker-col full-width">
                                <label>FECHA</label>
                                <div id="cardDateShort">-</div>
                            </div>
                        </div>
                        <div class="picker-row border-top">
                             <div class="picker-col full-width">
                                <label>ACTIVIDAD</label>
                                <div id="cardActivityShort">-</div>
                            </div>
                        </div>
                    </div>

                    <button class="btn-reserve-large" id="btnOpenReservation">
                        Reservar
                    </button>
                </div>
            </div>

        </div>
    </main>

    <div id="lightbox" class="lightbox">
        <span class="lightbox-close" id="lightboxClose">&times;</span>
        <div class="lightbox-content">
            <span class="lightbox-prev" id="lightboxPrev">&#10094;</span>
            <img id="lightboxImg" src="" alt="Galería">
            <span class="lightbox-next" id="lightboxNext">&#10095;</span>
        </div>
        <div class="lightbox-counter" id="lightboxCounter">1 / 5</div>
    </div>

    <div id="reservationModal" class="reservation-modal">
        <div class="reservation-modal-content">
            <div class="reservation-modal-header">
                <h2>Reservar Experiencia</h2>
                <span class="close" id="closeReservationModal">&times;</span>
            </div>
            <div id="reservationAlert" class="reservation-alert" style="display: none;"></div>
            <div class="reservation-summary">
                <div class="reservation-summary-title" id="reservationExpTitle"></div>
                <div class="reservation-summary-item">
                    <span>Fecha:</span><span id="reservationExpDate"></span>
                </div>
                <div class="reservation-summary-item">
                    <span>Ubicación:</span><span id="reservationExpLocation"></span>
                </div>
                <div class="reservation-summary-item">
                    <span>Precio por persona:</span><span id="reservationPricePerPerson"></span>
                </div>
            </div>
            <div class="form-group">
                <label style="text-align: center; display: block; margin-bottom: 15px;">Número de personas</label>
                <div class="seats-selector">
                    <button class="seats-btn" id="decreaseSeats">−</button>
                    <div class="seats-display" id="seatsDisplay">1</div>
                    <button class="seats-btn" id="increaseSeats">+</button>
                </div>
                <div class="seats-label" id="seatsAvailableLabel"></div>
            </div>
            <div class="reservation-summary">
                <div class="reservation-summary-total">
                    <span>Total:</span><span id="reservationTotal">$0.00</span>
                </div>
            </div>
            <div class="reservation-modal-footer">
                <button class="btn-cancel-reservation" id="btnCancelReservation">Cancelar</button>
                <button class="btn-confirm-reservation" id="btnConfirmReservation">Confirmar Reserva</button>
            </div>
        </div>
    </div>

    <script src="/static/scripts/notifications.js"></script>
    <script src="/static/scripts/load-header.js"></script>
    <script src="/static/scripts/experience-detail.js"></script>
</body>
</html>

</body>
</html>